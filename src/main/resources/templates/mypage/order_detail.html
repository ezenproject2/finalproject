<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultrag.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">

<head>
    <title> 이젠문고 </title>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="/css/mypageOrderListOuter.css"/>
    <link rel="stylesheet" href="/css/mypageOrderListInner.css"/>
</head>

<main layout:fragment="main">
    <div class="myPage_inner inner">
        <div class="myPage_left" style="margin-top: 0;">
            <a href="" class="myPage_profile">
                <div class="member_profile_photo_area">
                    <div class="member_profile_photo"></div>
                    <i class="ic ic_member_profile_pencil">
                        <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M30.1896 9.74448L24.2556 3.80909C24.0582 3.61172 23.8239 3.45515 23.5661 3.34833C23.3082 3.2415 23.0319 3.18652 22.7528 3.18652C22.4737 3.18652 22.1973 3.2415 21.9395 3.34833C21.6816 3.45515 21.4473 3.61172 21.25 3.80909L4.8729 20.1875C4.67472 20.3841 4.51759 20.6182 4.41066 20.8761C4.30373 21.1339 4.24912 21.4105 4.25001 21.6896V27.625C4.25001 28.1886 4.47389 28.7291 4.87241 29.1276C5.27092 29.5261 5.81143 29.75 6.37501 29.75H12.3104C12.5896 29.7509 12.8661 29.6963 13.124 29.5894C13.3819 29.4824 13.6159 29.3253 13.8125 29.1271L30.1896 12.75C30.387 12.5527 30.5436 12.3184 30.6504 12.0606C30.7572 11.8027 30.8122 11.5264 30.8122 11.2473C30.8122 10.9682 30.7572 10.6918 30.6504 10.4339C30.5436 10.1761 30.387 9.94181 30.1896 9.74448ZM6.81462 21.25L18.0625 10.0021L20.2792 12.2188L9.03126 23.4653L6.81462 21.25ZM6.37501 23.8146L10.1854 27.625H6.37501V23.8146ZM12.75 27.1854L10.5334 24.9688L21.7813 13.7209L23.9979 15.9375L12.75 27.1854ZM25.5 14.4354L19.5646 8.50003L22.7521 5.31253L28.6875 11.2466L25.5 14.4354Z" fill="white"/>
                        </svg>
                    </i>
                </div>
                <div class="member_name">
                    <span><span id="memberName">홍길동</span>님</span> <span id="memberGrade">새싹</span>
                </div>
                <div class="member_email"> <span>(example@example.com)</span></div>
            </a>

            <div class="myPage_menu">
                <div class="myPage_menu_item">
                    <p class="menu_item_title"><a href="">쇼핑 내역<i class="ic ic_arrow_right"></i></a></p>
                    <p class="menu_item_content"><a href="">주문/배송목록</a></p>
                    <p class="menu_item_content"><a href="">선물함</a></p>
                    <p class="menu_item_content"><a href="">매장 구매 내역</a></p>
                    <p class="menu_item_content"><a href="">영수증</a></p>
                </div>
                <div class="myPage_menu_item">
                    <p class="menu_item_title"><a href="">나의 통장<i class="ic ic_arrow_right"></i></a></p>
                    <p class="menu_item_content"><a href="">통합 포인트</a></p>
                    <p class="menu_item_content"><a href="">쿠폰</a></p>
                    <p class="menu_item_content"><a href="">기프트카드</a></p>
                </div>
                <div class="myPage_menu_item">
                    <p class="menu_item_title"><a href="">회원정보<i class="ic ic_arrow_right"></i></a></p>
                    <p class="menu_item_content"><a href="">배송주소록</a></p>
                    <p class="menu_item_content"><a href="">회원정보관리</a></p>
                    <p class="menu_item_content"><a href="">나의 회원등급</a></p>
                </div>
                <div class="myPage_menu_item">
                    <p class="menu_item_title"><a href="">고객센터<i class="ic ic_arrow_right"></i></a></p>
                    <p class="menu_item_content"><a href="">1:1 문의 내역</a></p>
                    <p class="menu_item_content"><a href="">업체배송 문의내역</a></p>
                </div>
                <div class="myPage_menu_item item_last">
                    <p class="menu_item_title"><a href="">도움이 필요하세요?</a></p>
                    <p class="menu_item_content"><a href="">FAQ</a></p>
                    <p class="menu_item_content"><a href="">1:1 고객 상담</a></p>
                </div>
            </div>
        </div>

        <div class="myPage_right">
            <div class="my_orders_container">
                <input type="hidden" id="isPickUpNoneInput" th:value="${isPickUpNone}">
                <h1 class="my_orders_title">주문/배송 조회 상세</h1>

                <div class="my_orders_nav">
                    <ul class="my_orders_nav_list"> <!--/* order.orderAt */-->
                        <li class="my_orders_nav_item"> <strong>[[${#strings.substringBefore(order.orderAt, 'T')}]]</strong></li> <!-- 주문 날짜 -->
                        <li class="my_orders_nav_item detail_nav_item"> 주문번호 <span class="order-number">[[${order.orno}]]</span> </li> <!-- 주문 번호 -->
                    </ul>
                </div>

                <div class="my_orders_box">

                    <div class="my_orders_box_wrap">
                        <div class="my_orders_table orders_detail_table">
                            <div class="orders_table_header">
                                <strong>주문 상품</strong>
                            </div>

                            <div class="orders_table_content order-data-container" th:each="detailProduct, orderStat: ${detailProductList}" th:data-order-size="${detailProductList.size}"> <!-- 책 1권의 정보 -->
                                <input type="hidden" id="productDiscountInput" th:value="${detailProduct.productVO.discount}" th:data-order-index="${orderStat.index}"> <!--/* discount: 책의 원가 */-->
                                <input type="hidden" id="orderDetailPriceInput" th:value="${detailProduct.orderDetailVO.price}" th:data-order-index="${orderStat.index}">
                                <div class="order_book_info_box flex">
                                    <div class="order_book_img">
                                        <a th:href="@{/product/detail(isbn=${detailProduct.productVO.isbn})}"> <!-- 책 상세 페이지 이동 -->
                                            <img th:src="${detailProduct.productVO.image}" alt="book">
                                        </a>
                                    </div>
                                    <div class="order_book_info flex">
                                        <a th:href="@{/product/detail(isbn=${detailProduct.productVO.isbn})}"><strong class="underline" th:text="'[' + ${detailProduct.productVO.primaryCtg} + '] ' + ${detailProduct.productVO.title}"></strong></a> <!-- 책 상세 페이지 이동 -->
                                        <span>수량 : [[${detailProduct.orderDetailVO.bookQty}]]</span>
                                    </div>
                                </div>

                                <div class="order_book_price order_detail_price">
                                    <span><strong>[[${#numbers.formatInteger(detailProduct.orderDetailVO.price, 3, 'COMMA')}]]</strong>원</span>
                                </div>

                                <div class="order_book_status order_detail_status">
                                    <strong>배송완료</strong>
                                </div>
                            </div>
                        </div>

                        <div class="my_orders_table orders_detail_table delivery-table" th:if="${isPickUpNone == 'true'}">
                            <div class="orders_table_header"> <strong>배송 정보</strong> </div>

                            <div class="orders_table_content">
                                <div class="orders_table_title">
                                    <span class="detail_table_title">기본 정보</span>
                                </div>

                                <div class="order_detail_address_info">
                                    <p class="orderer-info">
                                        <span class="orderer-name">[[${delivery.recName}]]</span>
                                        <span class="orderer-number">[[${delivery.recPhone}]]</span>
                                    </p>
                                    <p class="orderer-address">
                                        [[${delivery.addr}]]
                                    </p>
                                    <p class="order-requested"> <span>배송 요청사항 : </span> <span>[[${delivery.addrMemo}]]</span> </p>
                                </div>
                            </div>
                        </div>

                        <!--/* 픽업 테이블이 위의 배송 테이블의 양식을 그대로 씀. */-->
                        <div class="my_orders_table orders_detail_table pickup-table" th:if="${isPickUpNone == 'false'}">
                            <div class="orders_table_header"> <strong>픽업 정보</strong> </div>

                            <div class="orders_table_content">
                                <div class="orders_table_title">
                                    <span class="detail_table_title">기본 정보</span>
                                </div>

                                <div class="order_detail_address_info">
                                    <p class="orderer-info">
                                        <span class="orderer-name">[[${offlineStore.name}]]</span>
                                        <span class="orderer-number">[[${offlineStore.phone}]]</span>
                                    </p>
                                    <p class="orderer-address">
                                        [[${offlineStore.address}]]
                                    </p>
                                    <p class="order-requested"> <span>픽업 일자 : </span> <span>[[${pickUp.regAt}]]</span> </p>
                                </div>
                            </div>
                        </div>

                        <div class="my_orders_table orders_detail_table">
                            <div class="orders_table_header"> <strong>결제 정보</strong> </div>

                            <div class="orders_table_content">
                                <div class="order_product_price width-30">
                                    <p class="flex space-between">
                                        <span class="detail_table_title">주문 금액</span>
                                        <span class="detail_table_title"><strong class="sum-sale-price"></strong>원</span>
                                    </p>
                                    <p class="flex space-between">
                                        <span class="small-text">상품 금액</span>
                                        <span class="small-text"><strong class="small-text sum-original-price"></strong>원</span>
                                    </p>
                                    </p>
                                    <p class="flex space-between">
                                        <span class="small-text">할인 금액</span>
                                        <span class="small-text"><strong class="small-text sum-sale-amount"></strong>원</span>
                                    </p>
                                </div>

                                <div class="order_benefit_price width-30">
                                    <p class="flex space-between">
                                        <span class="detail_table_title">쿠폰/포인트 금액</span>
                                        <span class="detail_table_title"><strong>-3,560</strong>원</span>
                                    </p>
                                    <p class="flex space-between">
                                        <span class="small-text">쿠폰</span>
                                        <span class="small-text"><strong class="small-text">-1,560</strong>원</span>
                                    </p>
                                    </p>
                                    <p class="flex space-between">
                                        <span class="small-text">포인트</span>
                                        <span class="small-text"><strong class="small-text">-1,000</strong>p</span>
                                    </p>
                                </div>

                                <div class="order_total_price width-30">
                                    <p class="flex space-between">
                                        <span class="detail_table_title">결제 금액</span>
                                        <span class="detail_table_title"><strong>[[${#numbers.formatInteger(payment.price, 3, 'COMMA')}]]</strong>원</span>
                                    </p>
                                    <p class="flex space-between">
                                        <input type="hidden" id="paymentPgInput" th:value="${payment.measure}">
                                        <span class="small-text">결제 수단</span> <!-- 결제 수단 -->
                                        <span class="small-text"><strong class="small-text payment-measure">[[${payment.measure}]]</strong></span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script defer src="/js/mypageOrderListInnerStyle.js"></script>
    <script defer src="/js/mypageOrderDetailDisplay.js"></script>
</main>